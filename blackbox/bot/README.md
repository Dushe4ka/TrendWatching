# Telegram Bot - Модульная архитектура

## Структура проекта

```
bot/
├── main.py                    # Основной файл запуска бота
├── handlers/                  # Хендлеры (обработчики событий)
│   ├── __init__.py
│   ├── start_handlers.py     # Стартовые команды и меню
│   ├── sources_handlers.py   # Работа с источниками
│   ├── analysis_handlers.py  # Анализ трендов и дайджесты
│   ├── subscription_handlers.py # Управление подписками
│   ├── auth_handlers.py      # Авторизация Telegram
│   └── admin_handlers.py     # Админские функции
├── keyboards/                 # Клавиатуры
│   ├── __init__.py
│   └── inline_keyboards.py   # Inline клавиатуры
├── states/                    # Состояния FSM
│   ├── __init__.py
│   └── states.py             # Определения состояний
└── utils/                     # Утилиты
    ├── __init__.py
    ├── misc.py               # Общие утилиты
    └── sources_helpers.py    # Помощники для работы с источниками
```

## Описание модулей

### handlers/
- **start_handlers.py** - Обработчики команд `/start`, `/main_menu`, приветственные сообщения
- **sources_handlers.py** - Загрузка, управление и парсинг источников (CSV, RSS, Telegram)
- **analysis_handlers.py** - Анализ трендов, ежедневные и еженедельные дайджесты
- **subscription_handlers.py** - Управление подписками на дайджесты
- **auth_handlers.py** - Авторизация в Telegram, проверка статуса сессий
- **admin_handlers.py** - Админские функции управления микросервисом

### keyboards/
- **inline_keyboards.py** - Все inline клавиатуры бота

### states/
- **states.py** - Определения состояний FSM для различных процессов

### utils/
- **misc.py** - Общие утилиты (проверка админа, работа с категориями)
- **sources_helpers.py** - Помощники для работы с источниками

## Запуск бота

```bash
cd bot
python main.py
```

## Основные функции

1. **Источники** - загрузка и управление RSS и Telegram источниками
2. **Анализ** - анализ трендов по запросу и формирование дайджестов
3. **Подписки** - управление подписками на ежедневные дайджесты
4. **Авторизация** - управление Telegram сессиями (для админов)
5. **Админские функции** - управление микросервисом (для админов)

## Архитектурные принципы

- **Модульность** - каждый тип функциональности в отдельном файле
- **Разделение ответственности** - хендлеры, клавиатуры и утилиты разделены
- **Переиспользование** - общие функции вынесены в утилиты
- **Масштабируемость** - легко добавлять новые хендлеры и функции 